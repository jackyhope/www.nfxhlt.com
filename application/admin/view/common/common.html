
<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>管理后台</title>
    <meta name="description" content="" />
    <meta name="author" content="" />
    <base href="__ROOT__/">
    <link rel="stylesheet" href="__STATIC__/css/admin/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="__STATIC__/css/admin/style.default.css" type="text/css" />
    <link rel="stylesheet" href="__STATIC__/css/admin/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="__STATIC__/css/admin/admin.css" rel="stylesheet">

    <script type="text/javascript" src="__STATIC__/js/admin/plugins/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="__STATIC__/js/admin/plugins/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="__STATIC__/js/admin/plugins/jquery.cookie.js"></script>
    <script type="text/javascript" src="__STATIC__/js/admin/jquery.uniform.min.js"></script>

    <script type="text/javascript" src="__STATIC__/js/admin/plugins/jquery.slimscroll.js"></script>
    <script src="__STATIC__/js/admin/flowTip.js"></script>
    <script src="__STATIC__/js/admin/dialog.js"></script>
    <script src="__STATIC__/js/plugins/h5upload/h5upload.js"></script>
    <link rel="stylesheet" href="__STATIC__/js/plugins/h5upload/h5upload.css">
    <script src="__STATIC__/js/plugins/editor3/wangEditor.js"></script>
    <link rel="stylesheet" href="__STATIC__/js/plugins/editor3/wangEditor.css">

    {block name="header-ext"}{/block}
</head>
<body class="withvernav">
<div class="bodywrapper">
    <script>
        var UPLOAD_URL = "/web/public/admin/upload/index";
    </script>
    {include file="common/header" /}
    {block name="body-menu"}{/block}
    {block name="body-header"}{/block}
    <div class="centercontent">
        {block name="body-main"}{/block}
    </div>
    {block name="body-footer"}{/block}
    {block name="footer"}{/block}

    <!--
    <link rel="stylesheet" href="assets/plugins/h5upload/h5upload.css" rel="stylesheet" />
    <script src="assets/plugins/h5upload/h5upload.js"></script>

    -->



    <script type="text/javascript" src="__STATIC__/js/admin/custom/general.js"></script>
    <script src="__STATIC__/js/admin/admin.js"></script>
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="__STATIC__/js/admin/excanvas.min.js"></script><![endif]-->
    <!--[if IE 9]>
    <link rel="stylesheet" media="screen" href="css/style.ie9.css"/>
    <![endif]-->
    <!--[if IE 8]>
    <link rel="stylesheet" media="screen" href="css/style.ie8.css"/>
    <![endif]-->
    <!--[if lt IE 9]>
    <script src="__STATIC__/js/admin/css3-mediaqueries.js"></script>
    <![endif]-->


    {block name="footer-ext"}
    <script>
        (function($){
            var editor = new wangEditor("#editor");
            editor.customConfig.zIndex = 1;
            //editor.customConfig.uploadImgShowBase64 = true;
            //上传URL
            editor.customConfig.uploadImgServer = "{:U('Upload/index/index')}";
            //隐藏网络图片
            editor.customConfig.showLinkImg = false;
            //图片限制大小
            editor.customConfig.uploadImgMaxSize = 3 * 1024 * 1024;
            //图片数量
            editor.customConfig.uploadImgMaxLength = 5;
            //name
            editor.customConfig.uploadFileName = "file";
            //http头
            editor.customConfig.uploadImgHeaders = {
                "Accept" : "multipart/form-data"
            };
            //修改上传事件
            editor.customConfig.customUploadImg = function (files, insert) {
                // files 是 input 中选中的文件列表
                // insert 是获取图片 url 后，插入到编辑器的方法
                $.editorUpload(files,function(e){
                    switch(e.code){
                        case 500:
                            window.flowTip.show(e.info,"#ff5b57",5000);
                            break;
                        case 200:
                            window.flowTip.show(e.info,"#8de191",5000);
                            // 上传代码返回结果之后，将图片插入到编辑器中
                            insert("upload/" + e.data.url);

                            break;
                        case 100:
                            window.flowTip.show("开始上传","#8de191");
                            break;
                        case 206:
                            window.flowTip.show("上传进度 :" + parseInt((parseInt(e.data.index)+1)*100 / (parseInt(e.data.total))) +"%","#8de191");//文字内容
                            break;
                    }
                });

            }




            //消息提示
            /*
             editor.customConfig.customAlert = function (info) {
             // info 是需要提示的内容
             }*/

            editor.create();

            $('#myform').submit(function(){
                $("[name=content]").val(editor.txt.html());
            });

        })(jQuery);
    </script>
    {/block}
    {block name="footer-end"}{/block}
</body>
</html>